{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/emili/OneDrive/Escritorio/Dise%C3%B1o%20de%20Sistemas/2024/FrontGrupo13/Grupo13Front/informe6front/src/actions/equipo.js"],"sourcesContent":["'use server';\r\nimport { agregandoEquipo, buscarequipo, listaEquipo } from \"@/lib/api/equipo\";\r\nexport async function postEquipo(data) {\r\n    return await agregandoEquipo(data);\r\n}\r\n\r\nexport async function getbynombre(nombre) {\r\n    return await buscarequipo(nombre);\r\n}\r\n\r\nexport async function getsEquipo() {\r\n    return await listaEquipo();\r\n}"],"names":[],"mappings":";;;;;;;IAEsB;IAIA;IAIA"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/emili/OneDrive/Escritorio/Dise%C3%B1o%20de%20Sistemas/2024/FrontGrupo13/Grupo13Front/informe6front/src/lib/api/pruebaequipo.js"],"sourcesContent":["'use service';\r\nimport axios from 'axios';\r\n\r\nexport async function postsPruebaEquipo(data) {\r\n  try {\r\n    const response = await axios.post('https://localhost:7087/api/PruebaEquipo/api/v1/createpruebaEquipo', data, {\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n    console.log(response)\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error al enviar datos a la API:', error.response || error.message);\r\n    console.error('Detalles del error:', {\r\n        message: error.message,\r\n        status: error.response?.status,\r\n        data: error.response?.data,\r\n      });\r\n      \r\n    throw error; // Propaga el error para manejarlo en el componente\r\n  }\r\n}"],"names":[],"mappings":";;;AACA;AADA;;AAGO,eAAe,kBAAkB,IAAI;IAC1C,IAAI;QACF,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,qEAAqE,MAAM;YAC3G,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;QACA,QAAQ,GAAG,CAAC;QACZ,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC,MAAM,QAAQ,IAAI,MAAM,OAAO;QAChF,QAAQ,KAAK,CAAC,uBAAuB;YACjC,SAAS,MAAM,OAAO;YACtB,QAAQ,MAAM,QAAQ,EAAE;YACxB,MAAM,MAAM,QAAQ,EAAE;QACxB;QAEF,MAAM,OAAO,mDAAmD;IAClE;AACF"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/emili/OneDrive/Escritorio/Dise%C3%B1o%20de%20Sistemas/2024/FrontGrupo13/Grupo13Front/informe6front/src/actions/pruebaequipo.js"],"sourcesContent":["\"use service\";\r\n\r\nimport { postsPruebaEquipo } from \"@/lib/api/pruebaequipo\";\r\n\r\nexport async function agregandoPruebaEquipo(data){\r\n    return await postsPruebaEquipo(data);\r\n}"],"names":[],"mappings":";;;AAEA;AAFA;;AAIO,eAAe,sBAAsB,IAAI;IAC5C,OAAO,MAAM,CAAA,GAAA,iIAAA,CAAA,oBAAiB,AAAD,EAAE;AACnC"}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/emili/OneDrive/Escritorio/Dise%C3%B1o%20de%20Sistemas/2024/FrontGrupo13/Grupo13Front/informe6front/src/app/AltaPrueba/%5Bid%5D/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { getsEquipo } from \"@/actions/equipo\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { agregandoPruebaEquipo } from \"@/actions/pruebaequipo\";\r\nexport default function CargarEquipo({params}) {\r\n  const [formData, setFormData] = useState({\r\n    nombre: \"\",\r\n    idPais: \"\",\r\n    idPersona: \"\",\r\n  });\r\n  const [equipos, setEquipos] = useState([]); \r\n  const [tablaEquipos, setTablaEquipos] = useState([]); \r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [pruebaEquipo, setPruebaEquipo] = useState({\r\n    posicion : 0,\r\n    idPrueba: 0,\r\n    idEquipo: 0\r\n  })\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const listEquipos = await getsEquipo();\r\n        setEquipos(listEquipos);\r\n      } catch (error) {\r\n        console.error(\"Error al obtener los datos:\", error);\r\n        setError(\"No se pudieron cargar los datos\");\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleAgregarEquipo = () => {\r\n    const equipoSeleccionado = equipos.find((eq) => eq.nombre === formData.nombre);\r\n    if (equipoSeleccionado && !tablaEquipos.some((e) => e.nombre === equipoSeleccionado.nombre)) {\r\n      setTablaEquipos((prev) => [\r\n        ...prev,\r\n        { ...equipoSeleccionado, numero: prev.length + 1 },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const searchParams = useSearchParams();\r\n  const pruebaId = searchParams.get(\"id\");\r\n\r\n  \r\n\r\n  const handleEliminarEquipo = (numero) => {\r\n    setTablaEquipos((prev) =>\r\n      prev\r\n        .filter((equipo) => equipo.numero !== numero) \r\n        .map((equipo, index) => ({ ...equipo, numero: index + 1 })) \r\n    );\r\n  };\r\n\r\n  const handleAceptar = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Validación opcional: Define un rango máximo para las posiciones\r\n      const MAX_POSICIONES = 100; // Cambia esto según el límite que necesites\r\n      \r\n      if (tablaEquipos.length > MAX_POSICIONES) {\r\n        throw new Error(`No se pueden asignar más de ${MAX_POSICIONES} equipos.`);\r\n      }\r\n  \r\n      const requests = tablaEquipos.map((equipo, index) => {\r\n        const posicion = index + 1; \r\n        if (posicion < 1 || posicion > MAX_POSICIONES) {\r\n          throw new Error(`La posición ${posicion} está fuera de rango.`);\r\n        }\r\n  \r\n        const payload = {\r\n          posicion, \r\n          idPrueba: parseInt(pruebaId, 10), \r\n          idEquipo: equipo.id, \r\n        };\r\n  \r\n        console.log(\"Enviando datos para equipo:\", payload);\r\n        return agregandoPruebaEquipo(payload); \r\n      });\r\n  \r\n      await Promise.all(requests); \r\n      alert(\"Equipos registrados con éxito.\");\r\n      router.push(\"/\"); \r\n    } catch (err) {\r\n      console.error(\"Error al registrar equipos:\", err);\r\n      alert(`Ocurrió un error al registrar equipos: ${err.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  \r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n\r\n\r\n  \r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setPruebaEquipo({\r\n      ...formData,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    });\r\n  };\r\n\r\n  const handleApiSubmit = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const payload = {\r\n        posicion: parseInt(pruebaEquipo.posicion, 10),\r\n        idPrueba: parseInt(pruebaId, 10),\r\n        idEquipo: parseInt(pruebaEquipo.idEquipo, 10),\r\n        \r\n      };\r\n\r\n      console.log(\"Enviando datos:\", payload);\r\n\r\n      const response = await agregandoPruebaEquipo(payload);\r\n\r\n      console.log(\"Datos enviados con éxito:\", response);\r\n      alert(\"Equipo registrado con éxito.\");\r\n\r\n      \r\n      \r\n      \r\n    } catch (err) {\r\n      console.error(\"Error al enviar los datos:\", err);\r\n      alert(`Ocurrió un error: ${err.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const confirm = window.confirm(\"¿Estás seguro de que deseas registrar esta persona?\");\r\n    if (confirm) {\r\n      handleApiSubmit();\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-12\">\r\n      <Link\r\n        href=\"/\"\r\n        className=\"absolute top-4 left-4 text-xl text-blue-500 hover:underline\"\r\n      >\r\n        Volver al Inicio\r\n      </Link>\r\n\r\n      <form className=\"bg-gray-100 p-12 rounded-xl shadow-2xl max-w-5xl w-full space-y-10\">\r\n        <h1 className=\"text-4xl font-bold text-center text-black\">Cargar Equipo</h1>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-10\">\r\n         \r\n          <div>\r\n            <label\r\n              htmlFor=\"nombre\"\r\n              className=\"block text-lg font-medium mb-3 text-black\"\r\n            >\r\n              Seleccionar Equipo\r\n            </label>\r\n            <select\r\n              id=\"nombre\"\r\n              name=\"nombre\"\r\n              value={formData.nombre}\r\n              onChange={handleInputChange}\r\n              className=\"w-full p-4 border text-black rounded-lg shadow-sm bg-white outline-none\"\r\n            >\r\n              <option value=\"\">Selecciona un equipo</option>\r\n              {equipos.map((equipo) => (\r\n                <option key={equipo.id} value={equipo.nombre}>\r\n                  {equipo.nombre}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        \r\n        <div className=\"flex justify-end\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleAgregarEquipo}\r\n            className=\"px-8 py-4 bg-green-500 text-white rounded-lg shadow hover:bg-green-600\"\r\n          >\r\n            Agregar Equipo\r\n          </button>\r\n        </div>\r\n\r\n       \r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full border-collapse border border-gray-300 text-black\">\r\n            <thead>\r\n              <tr className=\"bg-gray-200\">\r\n                <th className=\"border border-gray-300 p-4 text-left font-semibold\">\r\n                  Número\r\n                </th>\r\n                <th className=\"border border-gray-300 p-4 text-left font-semibold\">\r\n                  Equipo\r\n                </th>\r\n                <th className=\"border border-gray-300 p-4 text-left font-semibold\">\r\n                  Eliminar\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {tablaEquipos.length > 0 ? (\r\n                tablaEquipos.map((equipo) => (\r\n                  <tr key={equipo.numero} className=\"bg-white\">\r\n                    <td className=\"border border-gray-300 p-4\">{equipo.numero}</td>\r\n                    <td className=\"border border-gray-300 p-4\">{equipo.nombre}</td>\r\n                    <td className=\"border border-gray-300 p-4 text-center\">\r\n                      <button\r\n                        onClick={() => handleEliminarEquipo(equipo.numero)}\r\n                        className=\"text-red-500 hover:underline\"\r\n                      >\r\n                        Eliminar\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td\r\n                    colSpan=\"3\"\r\n                    className=\"border border-gray-300 p-4 text-center\"\r\n                  >\r\n                    No hay equipos cargados\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end space-x-6\">\r\n          <Link href={\"/\"}>\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-8 py-4 bg-gray-200 text-black rounded-lg shadow hover:bg-gray-300\"\r\n            >\r\n              Cancelar\r\n            </button>\r\n          </Link>\r\n          \r\n            <button\r\n              type=\"button\"\r\n              onClick={handleAceptar}\r\n              className=\"px-8 py-4 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600\"\r\n              disabled={loading}\r\n              >\r\n              \r\n              {loading ? \"Enviando...\" : \"Aceptar\"}\r\n              \r\n            </button>\r\n          \r\n\r\n        </div>\r\n\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 591, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}